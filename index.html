<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="style.css">
    <title>CSS Clock</title>
</head>
<body>
    <div id=clock></div>
    <div id=marker-1 class=marker></div>
    <div id=marker-2 class=marker></div>
    <div id=marker-3 class=marker-big></div>
    <div id=marker-4 class=marker></div>
    <div id=marker-5 class=marker></div>
    <div id=marker-6 class=marker-big></div>
    <div id=marker-7 class=marker></div>
    <div id=marker-8 class=marker></div>
    <div id=marker-9 class=marker-big></div>
    <div id=marker-10 class=marker></div>
    <div id=marker-11 class=marker></div>
    <div id=marker-12 class=marker-big></div>

    <div id=marker-min-1 class=marker-min></div>
    <div id=marker-min-2 class=marker-min></div>
    <div id=marker-min-3 class=marker-min></div>
    <div id=marker-min-4 class=marker-min></div>
    <div id=marker-min-6 class=marker-min></div>
    <div id=marker-min-7 class=marker-min></div>
    <div id=marker-min-8 class=marker-min></div>
    <div id=marker-min-9 class=marker-min></div>
    <div id=marker-min-11 class=marker-min></div>
    <div id=marker-min-12 class=marker-min></div>
    <div id=marker-min-13 class=marker-min></div>
    <div id=marker-min-14 class=marker-min></div>
    <div id=marker-min-16 class=marker-min></div>
    <div id=marker-min-17 class=marker-min></div>
    <div id=marker-min-18 class=marker-min></div>
    <div id=marker-min-19 class=marker-min></div>
    <div id=marker-min-21 class=marker-min></div>
    <div id=marker-min-22 class=marker-min></div>
    <div id=marker-min-23 class=marker-min></div>
    <div id=marker-min-24 class=marker-min></div>
    <div id=marker-min-26 class=marker-min></div>
    <div id=marker-min-27 class=marker-min></div>
    <div id=marker-min-28 class=marker-min></div>
    <div id=marker-min-29 class=marker-min></div>
    <div id=marker-min-31 class=marker-min></div>
    <div id=marker-min-32 class=marker-min></div>
    <div id=marker-min-33 class=marker-min></div>
    <div id=marker-min-34 class=marker-min></div>
    <div id=marker-min-36 class=marker-min></div>
    <div id=marker-min-37 class=marker-min></div>
    <div id=marker-min-38 class=marker-min></div>
    <div id=marker-min-39 class=marker-min></div>
    <div id=marker-min-41 class=marker-min></div>
    <div id=marker-min-42 class=marker-min></div>
    <div id=marker-min-43 class=marker-min></div>
    <div id=marker-min-44 class=marker-min></div>
    <div id=marker-min-46 class=marker-min></div>
    <div id=marker-min-47 class=marker-min></div>
    <div id=marker-min-48 class=marker-min></div>
    <div id=marker-min-49 class=marker-min></div>
    <div id=marker-min-51 class=marker-min></div>
    <div id=marker-min-52 class=marker-min></div>
    <div id=marker-min-53 class=marker-min></div>
    <div id=marker-min-54 class=marker-min></div>
    <div id=marker-min-56 class=marker-min></div>
    <div id=marker-min-57 class=marker-min></div>
    <div id=marker-min-58 class=marker-min></div>
    <div id=marker-min-59 class=marker-min></div>

    <div id=number-1 class=number>1</div>
    <div id=number-2 class=number>2</div>
    <div id=number-3 class=number-big>3</div>
    <div id=number-4 class=number>4</div>
    <div id=number-5 class=number>5</div>
    <div id=number-6 class=number-big>6</div>
    <div id=number-7 class=number>7</div>
    <div id=number-8 class=number>8</div>
    <div id=number-9 class=number-big>9</div>
    <div id=number-10 class=number>10</div>
    <div id=number-11 class=number>11</div>
    <div id=number-12 class=number-big>12</div>

    <div id=dot></div>
    <div id=hour></div>
    <div id=minute></div>
    <div id=second></div>
    

    <script>
        let oldDate = new Date('1970-01-01T00:00:00')

        function reset_animation(element) {
            var el = document.getElementById(element)
            el.style.animation = 'none'
            el.offsetHeight /* trigger reflow */
            el.style.animation = null 
        }        

        function clockAnimated() {
            let date = new Date()

            const element = document.querySelector('body')

            let hours, minutes, seconds, oldHours, oldMinutes, oldSeconds

            hours = date.getHours()
            minutes = date.getMinutes()
            seconds = date.getSeconds()
            oldHours = oldDate.getHours()
            oldMinutes = oldDate.getMinutes()
            oldSeconds = oldDate.getSeconds()

            if(oldHours>hours) { 
                hours=oldHours+1;
            }

            if(oldMinutes>minutes) { 
                minutes=oldMinutes+1;
            }

            if(oldSeconds>seconds) { 
                seconds=oldSeconds+1;
            }

            element.style.setProperty('--hour', hours)
            element.style.setProperty('--minute', minutes)
            element.style.setProperty('--second', seconds)
            element.style.setProperty('--hour-before', oldHours)
            element.style.setProperty('--minute-before', oldMinutes)
            element.style.setProperty('--second-before', oldSeconds)

            reset_animation('second')
            reset_animation('minute')

            oldDate = new Date()
        }

        function clock() {
            let date = new Date()

            const element = document.querySelector('body')

            element.style.setProperty('--hour', date.getHours())
            element.style.setProperty('--minute', date.getMinutes())
            element.style.setProperty('--second', date.getSeconds())
        }

        window.addEventListener("load", () => {
            clockAnimated()
            window.setInterval(function(){
                clockAnimated()
            }, 1000)
        })
    </script>
</body>
</html>